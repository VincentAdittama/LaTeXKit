%% --------------------------------------------------------------------
%% Academic Assignment Layout - Preamble
%% Includes APA 7th Edition bibliography support
%% --------------------------------------------------------------------

%% Page Layout
\PassOptionsToPackage{a4paper, margin=1in}{geometry}
\usepackage{geometry}

%% Core Packages
\usepackage{fontspec}
\usepackage{graphicx}
% Configure graphics paths
% 1. Local images directory (./images)
% 2. Global assets in .latexkit/assets (relative to typical project depth)
\graphicspath{{./images/}{../../.latexkit/assets/}{../../../.latexkit/assets/}}
\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage{microtype}
\usepackage[none]{hyphenat}

%% Language & Bibliography
\usepackage[indonesian,english]{babel}
\usepackage{csquotes}

%% Hyperlinks (must be loaded before biblatex for full citation hyperlinks)
\usepackage{hyperref}

%% Bibliography (biblatex must be loaded after hyperref)
\usepackage[backend=biber, style=apa, sortcites=true, sorting=nyt]{biblatex}
\DeclareLanguageMapping{indonesian}{american-apa}
% Bibliography Configuration:
% The path to your .bib file depends on your Zotero export structure.
% Default to the standard Zotero export location:
\addbibresource{../zotero_export/Exported Items.bib}

\DefineBibliographyStrings{indonesian}{
  andothers = {et al\adddot},
  and = {\&},
  retrieved = {Diakses dari},
  from = {dari}
}

%% Make \cite produce parentheses for APA inline citations
\let\cite\parencite

%% Font Configuration
\setmainfont{Times New Roman}[Ligatures=TeX]

%% Typography
\tolerance=1000
\emergencystretch=3em
\frenchspacing

%% Headers & Footers
\setlength{\headheight}{15pt}
\pagestyle{empty}
\fancyhf{}
\fancyhead[L]{\docCourse}
\fancyhead[R]{\docAuthor{} - \thepage}
\renewcommand{\headrulewidth}{0.4pt}

%% Hyperlinks Configuration
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  citecolor=black,
  urlcolor=black,
  pdftitle={\docTitle},
  pdfauthor={\docAuthor},
  hypertexnames=false
}

%% Section Formatting
\usepackage{titlesec}
\titleformat{\section}{\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection}{1em}{}
